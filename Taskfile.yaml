version: "3"

dotenv: [".env"]

includes:
  client: ./task/Client-Taskfile.yaml
  user: ./task/User-Taskfile.yaml

tasks:
  deploy:
    deps:
      - client:build
      - user:build
    cmds:
      - |
        cd ./terragrunt
        terragrunt run-all apply --terragrunt-non-interactive
        cd ..
  undeploy:
    cmds:
      - |
        cd ./terragrunt
        terragrunt run-all destroy --terragrunt-non-interactive
        cd ..
  output:
    cmds:
      - |
        cd ./terragrunt
        terragrunt run-all output --terragrunt-non-interactive
        cd ..
